<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ¨æ€åšå®¢ç®¡ç†åå°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .sidebar {
            min-height: 100vh;
            background: #2c3e50;
        }
        
        .sidebar .nav-link {
            color: #ecf0f1;
            padding: 12px 20px;
            border-radius: 0;
            transition: all 0.3s;
        }
        
        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            background: #34495e;
            color: #3498db;
        }
        
        .sidebar .nav-link i {
            margin-right: 10px;
        }
        
        .main-content {
            background: #f8f9fa;
            min-height: 100vh;
        }
        
        .card {
            border: none;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            border-radius: 0.5rem;
        }
        
        .card-header {
            background: #fff;
            border-bottom: 1px solid #dee2e6;
            font-weight: 600;
        }
        
        .btn-primary {
            background: #3498db;
            border-color: #3498db;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            border-color: #2980b9;
        }
        
        .avatar-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #dee2e6;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .stats-card.success {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .stats-card.warning {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .stats-card.info {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- ä¾§è¾¹æ  -->
            <div class="col-md-3 col-lg-2 px-0 sidebar">
                <div class="p-3 text-center">
                    <h5 class="text-white mb-0">ğŸ“ åšå®¢ç®¡ç†</h5>
                </div>
                <nav class="nav flex-column">
                    <a class="nav-link active" href="#dashboard" data-bs-toggle="tab">
                        <i class="bi bi-speedometer2"></i> ä»ªè¡¨ç›˜
                    </a>
                    <a class="nav-link" href="#profile" data-bs-toggle="tab">
                        <i class="bi bi-person-circle"></i> ä¸ªäººèµ„æ–™
                    </a>
                    <a class="nav-link" href="#posts" data-bs-toggle="tab">
                        <i class="bi bi-file-text"></i> æ–‡ç« ç®¡ç†
                    </a>
                    <a class="nav-link" href="#categories" data-bs-toggle="tab">
                        <i class="bi bi-tags"></i> åˆ†ç±»ç®¡ç†
                    </a>
                    <a class="nav-link" href="#appearance" data-bs-toggle="tab">
                        <i class="bi bi-palette"></i> å¤–è§‚è®¾ç½®
                    </a>
                    <a class="nav-link" href="#social" data-bs-toggle="tab">
                        <i class="bi bi-share"></i> ç¤¾äº¤é“¾æ¥
                    </a>
                    <a class="nav-link" href="#settings" data-bs-toggle="tab">
                        <i class="bi bi-gear"></i> ç³»ç»Ÿè®¾ç½®
                    </a>
                </nav>
            </div>
            
            <!-- ä¸»å†…å®¹åŒº -->
            <div class="col-md-9 col-lg-10 main-content">
                <div class="tab-content">
                    <!-- ä»ªè¡¨ç›˜ -->
                    <div class="tab-pane fade show active" id="dashboard">
                        <div class="p-4">
                            <h2 class="mb-4">ğŸ“Š ä»ªè¡¨ç›˜</h2>
                            
                            <!-- ç»Ÿè®¡å¡ç‰‡ -->
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <div class="card stats-card">
                                        <div class="card-body text-center">
                                            <h3 class="mb-0" id="totalPosts">0</h3>
                                            <p class="mb-0">æ€»æ–‡ç« æ•°</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card stats-card success">
                                        <div class="card-body text-center">
                                            <h3 class="mb-0" id="totalViews">0</h3>
                                            <p class="mb-0">æ€»æµè§ˆé‡</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card stats-card warning">
                                        <div class="card-body text-center">
                                            <h3 class="mb-0" id="totalLikes">0</h3>
                                            <p class="mb-0">æ€»ç‚¹èµæ•°</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card stats-card info">
                                        <div class="card-body text-center">
                                            <h3 class="mb-0" id="totalComments">0</h3>
                                            <p class="mb-0">æ€»è¯„è®ºæ•°</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- æœ€è¿‘æ–‡ç«  -->
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">ğŸ“„ æœ€è¿‘æ–‡ç« </h5>
                                </div>
                                <div class="card-body">
                                    <div id="recentPosts"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸ªäººèµ„æ–™ -->
                    <div class="tab-pane fade" id="profile">
                        <div class="p-4">
                            <h2 class="mb-4">ğŸ‘¤ ä¸ªäººèµ„æ–™</h2>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">åŸºæœ¬ä¿¡æ¯</h5>
                                </div>
                                <div class="card-body">
                                    <form id="profileForm">
                                        <div class="row">
                                            <div class="col-md-3 text-center">
                                                <img id="avatarPreview" src="/assets/images/avatar.jpg" class="avatar-preview mb-3">
                                                <input type="file" id="avatarInput" class="form-control" accept="image/*">
                                            </div>
                                            <div class="col-md-9">
                                                <div class="row">
                                                    <div class="col-md-6 mb-3">
                                                        <label class="form-label">å§“å</label>
                                                        <input type="text" class="form-control" id="profileName" value="åšä¸»">
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <label class="form-label">æ˜µç§°</label>
                                                        <input type="text" class="form-control" id="profileNickname" value="å°åšä¸»">
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label">ä¸ªäººç®€ä»‹</label>
                                                    <textarea class="form-control" id="profileBio" rows="3">çƒ­çˆ±æŠ€æœ¯ï¼Œçƒ­çˆ±ç”Ÿæ´»</textarea>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 mb-3">
                                                        <label class="form-label">é‚®ç®±</label>
                                                        <input type="email" class="form-control" id="profileEmail" value="example@email.com">
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <label class="form-label">æ‰€åœ¨åœ°</label>
                                                        <input type="text" class="form-control" id="profileLocation" value="ä¸­å›½">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">ğŸ’¾ ä¿å­˜ä¸ªäººèµ„æ–™</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- æ–‡ç« ç®¡ç† -->
                    <div class="tab-pane fade" id="posts">
                        <div class="p-4">
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h2 class="mb-0">ğŸ“„ æ–‡ç« ç®¡ç†</h2>
                                <button class="btn btn-primary" onclick="showNewPostModal()">
                                    <i class="bi bi-plus"></i> æ–°å»ºæ–‡ç« 
                                </button>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">æ–‡ç« åˆ—è¡¨</h5>
                                </div>
                                <div class="card-body">
                                    <div id="postsList"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å…¶ä»–æ ‡ç­¾é¡µå ä½ -->
                    <div class="tab-pane fade" id="categories">
                        <div class="p-4">
                            <h2 class="mb-4">ğŸ·ï¸ åˆ†ç±»ç®¡ç†</h2>
                            <div class="alert alert-info">åˆ†ç±»ç®¡ç†åŠŸèƒ½å¼€å‘ä¸­...</div>
                        </div>
                    </div>
                    
                    <div class="tab-pane fade" id="appearance">
                        <div class="p-4">
                            <h2 class="mb-4">ğŸ¨ å¤–è§‚è®¾ç½®</h2>
                            <div class="alert alert-info">å¤–è§‚è®¾ç½®åŠŸèƒ½å¼€å‘ä¸­...</div>
                        </div>
                    </div>
                    
                    <div class="tab-pane fade" id="social">
                        <div class="p-4">
                            <h2 class="mb-4">ğŸ”— ç¤¾äº¤é“¾æ¥</h2>
                            <div class="alert alert-info">ç¤¾äº¤é“¾æ¥åŠŸèƒ½å¼€å‘ä¸­...</div>
                        </div>
                    </div>
                    
                    <div class="tab-pane fade" id="settings">
                        <div class="p-4">
                            <h2 class="mb-4">âš™ï¸ ç³»ç»Ÿè®¾ç½®</h2>
                            <div class="alert alert-info">ç³»ç»Ÿè®¾ç½®åŠŸèƒ½å¼€å‘ä¸­...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // å…¨å±€æ•°æ®
        let profileData = {};
        let postsData = { posts: [], categories: [], tags: [] };
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setupEventListeners();
            updateDashboard();
        });
        
        // åŠ è½½æ•°æ®
        async function loadData() {
            try {
                // åŠ è½½ä¸ªäººèµ„æ–™
                const profileResponse = await fetch('/src/data/profile.json');
                profileData = await profileResponse.json();
                
                // åŠ è½½æ–‡ç« æ•°æ®
                const postsResponse = await fetch('/src/data/posts.json');
                postsData = await postsResponse.json();
                
                // å¡«å……è¡¨å•
                fillProfileForm();
                
                // æ¸²æŸ“åˆ—è¡¨
                renderPostsList();
                
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                showAlert('åŠ è½½æ•°æ®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®', 'warning');
            }
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            // è¡¨å•æäº¤äº‹ä»¶
            document.getElementById('profileForm').addEventListener('submit', saveProfile);
        }
        
        // å¡«å……ä¸ªäººèµ„æ–™è¡¨å•
        function fillProfileForm() {
            if (profileData.basic) {
                document.getElementById('profileName').value = profileData.basic.name || '';
                document.getElementById('profileNickname').value = profileData.basic.nickname || '';
                document.getElementById('profileBio').value = profileData.basic.bio || '';
                document.getElementById('profileEmail').value = profileData.basic.email || '';
                document.getElementById('profileLocation').value = profileData.basic.location || '';
                
                if (profileData.basic.avatar) {
                    document.getElementById('avatarPreview').src = profileData.basic.avatar;
                }
            }
        }
        
        // æ›´æ–°ä»ªè¡¨ç›˜
        function updateDashboard() {
            const totalPosts = postsData.posts.length;
            const totalViews = postsData.posts.reduce((sum, post) => sum + (post.views || 0), 0);
            const totalLikes = postsData.posts.reduce((sum, post) => sum + (post.likes || 0), 0);
            const totalComments = postsData.posts.reduce((sum, post) => sum + (post.comments?.length || 0), 0);
            
            document.getElementById('totalPosts').textContent = totalPosts;
            document.getElementById('totalViews').textContent = totalViews;
            document.getElementById('totalLikes').textContent = totalLikes;
            document.getElementById('totalComments').textContent = totalComments;
            
            renderRecentPosts();
        }
        
        // æ¸²æŸ“æœ€è¿‘æ–‡ç« 
        function renderRecentPosts() {
            const recentPosts = postsData.posts
                .sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate))
                .slice(0, 5);
            
            const container = document.getElementById('recentPosts');
            container.innerHTML = recentPosts.map(post => `
                <div class="d-flex justify-content-between align-items-center py-2 border-bottom">
                    <div>
                        <h6 class="mb-1">${post.title}</h6>
                        <small class="text-muted">${new Date(post.publishDate).toLocaleDateString()}</small>
                    </div>
                    <span class="badge bg-${post.status === 'published' ? 'success' : 'secondary'}">${post.status === 'published' ? 'å·²å‘å¸ƒ' : 'è‰ç¨¿'}</span>
                </div>
            `).join('');
        }
        
        // æ¸²æŸ“æ–‡ç« åˆ—è¡¨
        function renderPostsList() {
            const container = document.getElementById('postsList');
            container.innerHTML = postsData.posts.map(post => `
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h6 class="card-title mb-1">${post.title}</h6>
                                <p class="card-text text-muted small mb-1">${post.excerpt}</p>
                                <div class="d-flex gap-2">
                                    <span class="badge bg-primary">${post.categories[0]}</span>
                                    ${post.tags.map(tag => `<span class="badge bg-secondary">${tag}</span>`).join('')}
                                </div>
                            </div>
                            <div class="col-md-2 text-center">
                                <span class="badge bg-${post.status === 'published' ? 'success' : 'warning'}">${post.status === 'published' ? 'å·²å‘å¸ƒ' : 'è‰ç¨¿'}</span>
                                <div class="small text-muted mt-1">${new Date(post.publishDate).toLocaleDateString()}</div>
                            </div>
                            <div class="col-md-2 text-end">
                                <button class="btn btn-sm btn-outline-primary" onclick="editPost('${post.id}')">ç¼–è¾‘</button>
                                <button class="btn btn-sm btn-outline-danger" onclick="deletePost('${post.id}')">åˆ é™¤</button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // ä¿å­˜ä¸ªäººèµ„æ–™
        function saveProfile(e) {
            e.preventDefault();
            
            profileData.basic = {
                name: document.getElementById('profileName').value,
                nickname: document.getElementById('profileNickname').value,
                bio: document.getElementById('profileBio').value,
                email: document.getElementById('profileEmail').value,
                location: document.getElementById('profileLocation').value,
                avatar: document.getElementById('avatarPreview').src
            };
            
            saveData();
            showAlert('ä¸ªäººèµ„æ–™ä¿å­˜æˆåŠŸï¼', 'success');
        }
        
        // ä¿å­˜æ•°æ®
        function saveData() {
            localStorage.setItem('blogProfileData', JSON.stringify(profileData));
            localStorage.setItem('blogPostsData', JSON.stringify(postsData));
        }
        
        // æ˜¾ç¤ºæ–°å»ºæ–‡ç« æ¨¡æ€æ¡†
        function showNewPostModal() {
            showAlert('æ–°å»ºæ–‡ç« åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }
        
        // ç¼–è¾‘æ–‡ç« 
        function editPost(id) {
            showAlert('ç¼–è¾‘åŠŸèƒ½å¼€å‘ä¸­...', 'info');
        }
        
        // åˆ é™¤æ–‡ç« 
        function deletePost(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ')) {
                postsData.posts = postsData.posts.filter(post => post.id !== id);
                saveData();
                renderPostsList();
                updateDashboard();
                showAlert('æ–‡ç« åˆ é™¤æˆåŠŸï¼', 'success');
            }
        }
        
        // æ˜¾ç¤ºæç¤º
        function showAlert(message, type = 'info') {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
            alertDiv.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 3000);
        }
    </script>
</body>
</html>
