<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>真实博客管理后台</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .header h1 {
            color: #007cba;
            margin-bottom: 10px;
        }
        
        .nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .nav button {
            background: #007cba;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .nav button:hover {
            background: #005a87;
        }
        
        .nav button.active {
            background: #005a87;
        }
        
        .content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group textarea {
            min-height: 200px;
            resize: vertical;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }
        
        .btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        
        .btn:hover {
            background: #218838;
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-secondary:hover {
            background: #545b62;
        }
        
        .btn-danger {
            background: #dc3545;
        }
        
        .btn-danger:hover {
            background: #c82333;
        }
        
        .article-list {
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .article-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .article-item:last-child {
            border-bottom: none;
        }
        
        .article-title {
            font-weight: 500;
            color: #007cba;
        }
        
        .article-meta {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .article-actions {
            display: flex;
            gap: 5px;
        }
        
        .btn-small {
            padding: 5px 10px;
            font-size: 12px;
        }
        
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 4px;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .config-section {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 4px;
        }
        
        .config-section h3 {
            margin-bottom: 15px;
            color: #007cba;
        }
        
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        .preview {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .preview h1, .preview h2, .preview h3 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .preview p {
            margin-bottom: 10px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📝 真实博客管理后台</h1>
            <p>这个后台可以真正管理你的博客内容</p>
        </div>
        
        <div class="nav">
            <button class="nav-btn active" onclick="showSection('create')">✏️ 创建文章</button>
            <button class="nav-btn" onclick="showSection('manage')">📄 管理文章</button>
            <button class="nav-btn" onclick="showSection('config')">⚙️ 网站配置</button>
            <button class="nav-btn" onclick="showSection('deploy')">🚀 部署指南</button>
        </div>
        
        <div id="alert-container"></div>
        
        <!-- 创建文章 -->
        <div id="create" class="content section active">
            <h2>✏️ 创建新文章</h2>
            <p>创建新的博客文章，支持 Markdown 格式</p>
            
            <form id="create-article-form">
                <div class="form-group">
                    <label for="title">文章标题 *</label>
                    <input type="text" id="title" name="title" required placeholder="输入文章标题">
                </div>
                
                <div class="form-group">
                    <label for="categories">分类</label>
                    <input type="text" id="categories" name="categories" placeholder="例如：技术、生活、随笔">
                </div>
                
                <div class="form-group">
                    <label for="tags">标签</label>
                    <input type="text" id="tags" name="tags" placeholder="用逗号分隔，例如：JavaScript,前端,教程">
                </div>
                
                <div class="form-group">
                    <label for="cover">封面图片URL</label>
                    <input type="text" id="cover" name="cover" placeholder="图片URL（可选）">
                </div>
                
                <div class="form-group">
                    <label for="content">文章内容 (Markdown) *</label>
                    <textarea id="content" name="content" placeholder="在这里写你的文章内容，支持 Markdown 格式..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="recommend" name="recommend"> 推荐文章
                    </label>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="top" name="top"> 置顶文章
                    </label>
                </div>
                
                <button type="submit" class="btn">📝 生成文章文件</button>
                <button type="button" class="btn btn-secondary" onclick="previewArticle()">👁️ 预览</button>
                <button type="button" class="btn btn-secondary" onclick="clearForm()">清空表单</button>
            </form>
            
            <div id="preview-container" style="display: none;">
                <h3>文章预览</h3>
                <div id="preview-content" class="preview"></div>
            </div>
            
            <div id="generated-file" style="display: none;">
                <h3>生成的文件内容</h3>
                <div id="file-content" class="code-block"></div>
                <div class="alert alert-info">
                    <strong>下一步操作：</strong>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>复制上面的内容</li>
                        <li>在本地创建对应的 Markdown 文件</li>
                        <li>将内容粘贴到文件中</li>
                        <li>提交到 Git 仓库</li>
                        <li>等待自动部署</li>
                    </ol>
                </div>
            </div>
        </div>
        
        <!-- 管理文章 -->
        <div id="manage" class="content section">
            <h2>📄 管理文章</h2>
            <p>管理现有的博客文章</p>
            
            <div class="alert alert-info">
                <strong>💡 提示：</strong> 文章管理需要通过 Git 进行。你可以：
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>在本地编辑 <code>src/content/blog/</code> 目录下的文件</li>
                    <li>使用 GitHub 网页编辑器</li>
                    <li>使用 VS Code 等编辑器</li>
                </ul>
            </div>
            
            <div class="config-section">
                <h3>📁 文章目录结构</h3>
                <div class="code-block">
src/content/blog/
├── 2024-01-15-文章标题.md
├── 2024-01-16-另一篇文章.md
└── ...
                </div>
            </div>
            
            <div class="config-section">
                <h3>🔧 快速操作</h3>
                <button class="btn" onclick="openGitHub()">📂 打开 GitHub 仓库</button>
                <button class="btn btn-secondary" onclick="showLocalCommands()">💻 显示本地命令</button>
            </div>
        </div>
        
        <!-- 网站配置 -->
        <div id="config" class="content section">
            <h2>⚙️ 网站配置</h2>
            <p>配置网站的基本信息</p>
            
            <div class="config-grid">
                <div class="config-section">
                    <h3>基本信息</h3>
                    <div class="form-group">
                        <label for="site-title">网站标题</label>
                        <input type="text" id="site-title" value="我的博客">
                    </div>
                    <div class="form-group">
                        <label for="site-description">网站描述</label>
                        <textarea id="site-description" rows="3">我的个人博客</textarea>
                    </div>
                    <div class="form-group">
                        <label for="author">作者</label>
                        <input type="text" id="author" value="博主">
                    </div>
                    <button class="btn" onclick="generateConfig()">🔧 生成配置文件</button>
                </div>
                
                <div class="config-section">
                    <h3>导航设置</h3>
                    <div class="form-group">
                        <label for="nav-items">导航菜单</label>
                        <textarea id="nav-items" rows="5" placeholder="每行一个菜单项，格式：显示名称|链接地址">关于|/about
文章|/articles
联系|/contact</textarea>
                    </div>
                </div>
            </div>
            
            <div id="config-output" style="display: none;">
                <h3>生成的配置文件</h3>
                <div id="config-content" class="code-block"></div>
            </div>
        </div>
        
        <!-- 部署指南 -->
        <div id="deploy" class="content section">
            <h2>🚀 部署指南</h2>
            <p>如何部署你的博客更新</p>
            
            <div class="config-section">
                <h3>📋 部署步骤</h3>
                <ol style="margin-left: 20px;">
                    <li><strong>本地开发</strong>
                        <div class="code-block">
# 克隆仓库
git clone https://github.com/你的用户名/jade-t.git
cd jade-t

# 安装依赖
pnpm install

# 启动开发服务器
pnpm dev
                        </div>
                    </li>
                    
                    <li><strong>创建文章</strong>
                        <div class="code-block">
# 使用脚本创建文章
node script/create-post.js "文章标题"

# 或者手动创建文件
# 在 src/content/blog/ 目录下创建 .md 文件
                        </div>
                    </li>
                    
                    <li><strong>提交更改</strong>
                        <div class="code-block">
# 添加文件
git add .

# 提交更改
git commit -m "添加新文章"

# 推送到远程仓库
git push
                        </div>
                    </li>
                    
                    <li><strong>自动部署</strong>
                        <p>Netlify 会自动检测到更改并重新部署你的网站</p>
                    </li>
                </ol>
            </div>
            
            <div class="config-section">
                <h3>🔗 有用的链接</h3>
                <ul style="margin-left: 20px;">
                    <li><a href="https://github.com/uxiaohu/jade-t" target="_blank">GitHub 仓库</a></li>
                    <li><a href="https://jade-t.netlify.app" target="_blank">博客网站</a></li>
                    <li><a href="https://app.netlify.com" target="_blank">Netlify 控制台</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // 显示不同的部分
        function showSection(sectionId) {
            // 隐藏所有部分
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // 移除所有导航按钮的活跃状态
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 显示选中的部分
            document.getElementById(sectionId).classList.add('active');
            
            // 设置导航按钮的活跃状态
            event.target.classList.add('active');
        }
        
        // 显示提示信息
        function showAlert(message, type = 'success') {
            const alertContainer = document.getElementById('alert-container');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            
            alertContainer.appendChild(alert);
            
            // 3秒后自动移除
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }
        
        // 清空表单
        function clearForm() {
            document.getElementById('create-article-form').reset();
            document.getElementById('preview-container').style.display = 'none';
            document.getElementById('generated-file').style.display = 'none';
            showAlert('表单已清空');
        }
        
        // 预览文章
        function previewArticle() {
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').value;
            
            if (!title || !content) {
                showAlert('请填写标题和内容', 'error');
                return;
            }
            
            const previewContent = document.getElementById('preview-content');
            previewContent.innerHTML = `
                <h1>${title}</h1>
                <div>${marked.parse(content)}</div>
            `;
            
            document.getElementById('preview-container').style.display = 'block';
            showAlert('预览已生成');
        }
        
        // 生成配置文件
        function generateConfig() {
            const title = document.getElementById('site-title').value;
            const description = document.getElementById('site-description').value;
            const author = document.getElementById('author').value;
            const navItems = document.getElementById('nav-items').value;
            
            const config = `export default {
  Title: '${title}',
  Site: 'https://jade-t.netlify.app',
  Subtitle: '${description}',
  Description: '${description}',
  Author: '${author}',
  // ... 其他配置
}`;
            
            document.getElementById('config-content').textContent = config;
            document.getElementById('config-output').style.display = 'block';
            showAlert('配置文件已生成');
        }
        
        // 打开 GitHub
        function openGitHub() {
            window.open('https://github.com/uxiaohu/jade-t', '_blank');
        }
        
        // 显示本地命令
        function showLocalCommands() {
            const commands = `# 本地开发命令
pnpm dev          # 启动开发服务器
pnpm build        # 构建生产版本
pnpm preview      # 预览生产版本

# 文章管理命令
node script/create-post.js "文章标题"  # 创建新文章
git add .                            # 添加更改
git commit -m "更新内容"              # 提交更改
git push                             # 推送到远程仓库`;
            
            showAlert('本地命令已复制到控制台', 'info');
            console.log(commands);
        }
        
        // 表单提交
        document.getElementById('create-article-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const title = formData.get('title');
            const categories = formData.get('categories') || '技术';
            const tags = formData.get('tags') || '标签1,标签2';
            const cover = formData.get('cover') || '';
            const content = formData.get('content');
            const recommend = formData.get('recommend') ? 'true' : 'false';
            const top = formData.get('top') ? 'true' : 'false';
            
            if (!title || !content) {
                showAlert('请填写标题和内容', 'error');
                return;
            }
            
            // 生成文章ID
            const id = title.toLowerCase()
                .replace(/[^a-z0-9\u4e00-\u9fa5]/g, '-')
                .replace(/-+/g, '-')
                .replace(/^-|-$/g, '');
            
            // 生成当前日期
            const now = new Date();
            const date = now.toISOString().split('T')[0];
            const time = now.toISOString().split('T')[1].split('.')[0];
            
            // 生成文章内容
            const tagsArray = tags.split(',').map(tag => `  - ${tag.trim()}`).join('\n');
            
            const articleContent = `---
title: "${title}"
categories: ${categories}
tags:
${tagsArray}
id: "${id}"
date: "${date} ${time}"
updated: "${date} ${time}"
cover: "${cover}"
recommend: ${recommend}
top: ${top}
hide: false
---

${content}`;
            
            // 显示生成的文件内容
            document.getElementById('file-content').textContent = articleContent;
            document.getElementById('generated-file').style.display = 'block';
            
            showAlert(`文章 "${title}" 生成成功！请复制内容并创建文件。`);
        });
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            showAlert('真实管理后台加载完成！现在你可以真正管理博客内容了。');
        });
        
        // 简单的 Markdown 解析器（用于预览）
        const marked = {
            parse: function(text) {
                return text
                    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                    .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                    .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                    .replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>')
                    .replace(/\*(.*)\*/gim, '<em>$1</em>')
                    .replace(/\n/gim, '<br>');
            }
        };
    </script>
</body>
</html>
